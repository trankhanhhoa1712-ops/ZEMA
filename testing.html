<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ZEMA - BẢNG ĐÁNH GIÁ CHẤT LƯỢNG TÓC</title>
  <style>
    :root {
      --bg:#ffe6f0;          
      --card:#ffffff;        
      --muted:#a8557a;       
      --accent:#ec4899;      
      --glass: rgba(255,182,193,0.2); 
      --good: #4caf50;       /* Màu xanh cho tóc khỏe */
      --medium: #ff9800;     /* Màu cam cho tóc trung bình */
      --weak: #e91e63;       /* Màu hồng đậm cho tóc yếu */
      --critical: #f44336;   /* Màu đỏ cho tóc hư tổn nặng */
      --severe:   #9c27b0;   /* Màu tím cho tóc hư tổn nghiêm trọng */
    }
    body {
      font-family: Inter, ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial;
      margin: 0;
      background: linear-gradient(180deg,#ffe6f0 0%, #fff0f6 100%);
      color: #3a0d1d;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: var(--card);
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      padding: 30px;
      max-width: 800px;
      width: 100%;
    }
    h1 {
      text-align: center;
      color: var(--accent);
      margin-bottom: 20px;
    }
    .info {
      margin-bottom: 20px;
    }
    label {
      font-weight: bold;
    }
    input {
      margin-top: 5px;
      margin-bottom: 15px;
      padding: 8px;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .question {
      margin: 20px 0;
    }
    .stars {
      display: flex;
      flex-direction: row-reverse;
      justify-content: flex-end;
    }
    .stars input {
      display: none;
    }
    .stars label {
      font-size: 30px;
      color: #ccc;
      cursor: pointer;
      transition: color 0.2s;
    }
    .stars input:checked ~ label,
    .stars label:hover,
    .stars label:hover ~ label {
      color: var(--accent);
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s;
    }
    button:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    .result {
      margin-top: 20px;
      padding: 20px;
      background: var(--glass);
      border-radius: 12px;
      display: none;
    }
    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .average-score {
      font-size: 24px;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 20px;
      color: white;
    }
    .score-good {
      background-color: var(--good);
    }
    .score-medium {
      background-color: var(--medium);
    }
    .score-weak {
      background-color: var(--weak);
    }
    .score-critical {
      background-color: var(--critical);
    }
    .evaluation {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .evaluation-good {
      color: var(--good);
    }
    .evaluation-medium {
      color: var(--medium);
    }
    .evaluation-weak {
      color: var(--weak);
    }
    .evaluation-critical {
      color: var(--critical);
    }
    .recommendation {
      padding: 15px;
      border-left: 4px solid var(--accent);
      background-color: rgba(255, 255, 255, 0.7);
      border-radius: 0 8px 8px 0;
      margin-bottom: 15px;
    }
    .recommendation-title {
      font-weight: bold;
      margin-bottom: 8px;
      color: var(--muted);
    }
    .guide-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .guide-table th {
      background-color: var(--accent);
      color: white;
      padding: 12px;
      text-align: left;
    }
    .guide-table td {
      padding: 12px;
      border-bottom: 1px solid #eee;
    }
    .guide-table tr:last-child td {
      border-bottom: none;
    }
    .guide-table tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    .rating-good {
      color: var(--good);
      font-weight: bold;
    }
    .rating-medium {
      color: var(--medium);
      font-weight: bold;
    }
    .rating-weak {
      color: var(--weak);
      font-weight: bold;
    }
    .rating-critical {
      color: var(--critical);
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
<h1>ZEMA - BẢNG ĐÁNH GIÁ CHẤT LƯỢNG TÓC</h1>

<div class="info">
  <label for="name">Tên khách hàng:</label>
  <input type="text" id="name" placeholder="Nhập tên khách hàng">

  <label for="dob">Ngày sinh:</label>
  <input type="date" id="dob" onchange="calculateAge()">

  <div id="ageDisplay"></div>
</div>

<form id="surveyForm">
  <div class="question">
    <p>1. Độ dày sợi tóc</p>
    <div class="stars">
      <input type="radio" id="q1-5" name="q1" value="5"><label for="q1-5">★</label>
      <input type="radio" id="q1-4" name="q1" value="4"><label for="q1-4">★</label>
      <input type="radio" id="q1-3" name="q1" value="3"><label for="q1-3">★</label>
      <input type="radio" id="q1-2" name="q1" value="2"><label for="q1-2">★</label>
      <input type="radio" id="q1-1" name="q1" value="1"><label for="q1-1">★</label>
    </div>
  </div>
   <div class="question">
        <p>2. Mật độ tóc</p>
        <div class="stars">
          <input type="radio" id="q2-5" name="q2" value="5"><label for="q2-5">★</label>
          <input type="radio" id="q2-4" name="q2" value="4"><label for="q2-4">★</label>
          <input type="radio" id="q2-3" name="q2" value="3"><label for="q2-3">★</label>
          <input type="radio" id="q2-2" name="q2" value="2"><label for="q2-2">★</label>
          <input type="radio" id="q2-1" name="q2" value="1"><label for="q2-1">★</label>
        </div>
      </div>

      <div class="question">
        <p>3. Độ đàn hồi</p>
        <div class="stars">
          <input type="radio" id="q3-5" name="q3" value="5"><label for="q3-5">★</label>
          <input type="radio" id="q3-4" name="q3" value="4"><label for="q3-4">★</label>
          <input type="radio" id="q3-3" name="q3" value="3"><label for="q3-3">★</label>
          <input type="radio" id="q3-2" name="q3" value="2"><label for="q3-2">★</label>
          <input type="radio" id="q3-1" name="q3" value="1"><label for="q3-1">★</label>
        </div>
      </div>

      <div class="question">
        <p>4. Độ xốp (Porosity)</p>
        <div class="stars">
          <input type="radio" id="q4-5" name="q4" value="5"><label for="q4-5">★</label>
          <input type="radio" id="q4-4" name="q4" value="4"><label for="q4-4">★</label>
          <input type="radio" id="q4-3" name="q4" value="3"><label for="q4-3">★</label>
          <input type="radio" id="q4-2" name="q4" value="2"><label for="q4-2">★</label>
          <input type="radio" id="q4-1" name="q4" value="1"><label for="q4-1">★</label>
        </div>
      </div>

      <div class="question">
        <p>5. Độ bóng – mượt</p>
        <div class="stars">
          <input type="radio" id="q5-5" name="q5" value="5"><label for="q5-5">★</label>
          <input type="radio" id="q5-4" name="q5" value="4"><label for="q5-4">★</label>
          <input type="radio" id="q5-3" name="q5" value="3"><label for="q5-3">★</label>
          <input type="radio" id="q5-2" name="q5" value="2"><label for="q5-2">★</label>
          <input type="radio" id="q5-1" name="q5" value="1"><label for="q5-1">★</label>
        </div>
      </div>

      <div class="question">
        <p>6. Tình trạng bề mặt</p>
        <div class="stars">
          <input type="radio" id="q6-5" name="q6" value="5"><label for="q6-5">★</label>
          <input type="radio" id="q6-4" name="q6" value="4"><label for="q6-4">★</label>
          <input type="radio" id="q6-3" name="q6" value="3"><label for="q6-3">★</label>
          <input type="radio" id="q6-2" name="q6" value="2"><label for="q6-2">★</label>
          <input type="radio" id="q6-1" name="q6" value="1"><label for="q6-1">★</label>
        </div>
      </div>

  <!-- Các câu hỏi khác giữ nguyên như code cũ -->
  <button type="button" onclick="calculateAverage()">Tính điểm trung bình</button>
</form>

<div class="result" id="result" style="display:none;">
  <div class="result-header">
    <h2>Kết quả & khuyến nghị</h2>
    <div class="average-score" id="averageScore"></div>
  </div>
  
  <!-- Thanh đo hư tổn -->
<div class="damage-meter">
  <div style="margin-bottom:8px;">Độ hư tổn: <span id="damagePercent">0%</span></div>
  <div style="width:100%; background:#eee; border-radius:10px; overflow:hidden;">
    <div id="damageFill" style="width:0%; padding:4px; color:white; text-align:center;">
      0%
    </div>
  </div>
</div>

  <!-- Đánh giá -->
  <div class="evaluation" id="evaluation"></div>

  <!-- Khuyến nghị -->
  <div class="recommendation">
    <div class="recommendation-title">Hướng dẫn dịch vụ:</div>
    <div id="recommendationText"></div>
    <ul id="recommendationList"></ul>
  </div>
  
  <!-- Bảng hướng dẫn -->
  <table class="guide-table">
    <tr>
      <th>Điểm trung bình</th>
      <th>Đánh giá</th>
      <th>Hoạt chất phục hồi</th>
    </tr>
    <tr>
      <td class="rating-good">4.0 – 5.0</td>
      <td class="rating-good">Tóc khỏe</td>
      <td>Hoạt chất Protein Peptide, Collagen thuỷ phân.</td>
    </tr>
    <tr>
      <td class="rating-medium">3.0 – 3.9</td>
      <td class="rating-medium">Tóc trung bình</td>
      <td>Hoạt chất Amino Acid, Keratin thuỷ phân.</td>
    </tr>
    <tr>
      <td class="rating-weak">2.0 – 2.9</td>
      <td class="rating-weak">Tóc yếu</td>
      <td>Hoạt chất Amino Acid, Keratin thuỷ phân, Collagen Thuỷ phân. </td>
    </tr>
    <tr>
      <td class="rating-critical">1.1 - 1.9</td>
      <td class="rating-critical">Hư tổn nặng</td>
      <td>Hoạt chất Amino Acid, Keratin thuỷ phân, Collagen Thuỷ phân.</td>
    </tr>
    <tr>
  <td class="rating-severe">1.0</td>
  <td class="rating-severe">Hư tổn nghiêm trọng</td>
  <td>Hoạt chất Amino Acid, Keratin, Collagen Thuỷ phân, Protein peptide.</td>
</tr>
  </table>
</div>
<script>
function calculateAge() {
  const dob = document.getElementById('dob').value;
  if (!dob) return;
  const birthDate = new Date(dob);
  const today = new Date();
  let age = today.getFullYear() - birthDate.getFullYear();
  const m = today.getMonth() - birthDate.getMonth();
  if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
    age--;
  }
  document.getElementById('ageDisplay').innerHTML = `Tuổi: <b>${age}</b>`;
}

function calculateAverage() {
  const form = document.getElementById('surveyForm');
  let total = 0, count = 0;
  for (let i = 1; i <= 6; i++) {
    const rating = form.querySelector(`input[name="q${i}"]:checked`);
    if (rating) {
      total += parseInt(rating.value);
      count++;
    }
  }

  if (count > 0) {
    const avg = (total / count).toFixed(2);
    document.getElementById('result').style.display = 'block';
    document.getElementById('averageScore').textContent = `Điểm: ${avg}`;

    // % hư tổn (5 = 0%, 1 = 100%)
    const damagePercent = 100 - ((avg - 1) / 4 * 100);
    document.getElementById('damagePercent').textContent = `${damagePercent.toFixed(0)}%`;
    document.getElementById('damageFill').style.width = `${damagePercent}%`;
    document.getElementById('damageFill').textContent = `${damagePercent.toFixed(0)}%`;

    let meterColor;
    if (damagePercent <= 25) {
      meterColor = 'linear-gradient(90deg, #4caf50, #8bc34a)';
    } else if (damagePercent <= 50) {
      meterColor = 'linear-gradient(90deg, #cddc39, #ffeb3b)';
    } else if (damagePercent <= 75) {
      meterColor = 'linear-gradient(90deg, #ffc107, #ff9800)';
    } else {
      meterColor = 'linear-gradient(90deg, #ff5722, #f44336)';
    }
    document.getElementById('damageFill').style.background = meterColor;
    // Đặt màu sắc cho thanh tiến trình và chữ dựa trên mức độ hư tổn
let textColor;
if (avg >= 4.0) {
    textColor = getComputedStyle(document.documentElement).getPropertyValue('--good').trim();
} else if (avg >= 3.0) {
    textColor = getComputedStyle(document.documentElement).getPropertyValue('--medium').trim();
} else if (avg >= 2.0) {
    textColor = getComputedStyle(document.documentElement).getPropertyValue('--weak').trim();
} else {
    textColor = getComputedStyle(document.documentElement).getPropertyValue('--critical').trim();
}

// Thanh tiến trình
document.getElementById('damageFill').style.background = textColor;

// Áp dụng màu chữ + in đậm cho Điểm và Đánh giá
const avgScoreEl = document.getElementById('averageScore');
avgScoreEl.style.color = textColor;
avgScoreEl.style.fontWeight = 'bold';

const evaluationEl = document.getElementById('evaluation');
evaluationEl.style.color = textColor;
evaluationEl.style.fontWeight = 'bold';

   // Gán khuyến nghị
let evaluation, recommendation, recommendations = [];
if (avg >= 4.0) {
  evaluation = "Tóc khỏe";
  recommendations = [
    "Phục hồi tần xuất: 2 lần 1 tháng", 
    "Sử dụng các hoạt chất Protein Peptide, Collagen thuỷ phân", 
    "Khuyến khích kết hợp dịch vụ cắt tỉa ngọn tóc định kỳ 1 lần/tháng", 
    "Có thể thực hiện uốn/duỗi/nhuộm bình thường"
  ];
} else if (avg >= 3.0) {
  evaluation = "Tóc trung bình";
  recommendations = [
    "Phục hồi tần suất 2 lần 1 tháng", 
    "Sử dụng các hoạt chất Amino Acid, Keratin thuỷ phân", 
    "Khuyến khích kết hợp xả dưỡng tại nhà để tăng hiệu quả", 
    "Có thể thực hiện uốn/duỗi/nhuộm bình thường"
  ];
} else if (avg >= 2.0) {
  evaluation = "Tóc yếu";
  recommendations = [
    "Phục hồi chuyên sâu 1 lần 1 tuần", 
    "Sử dụng các hoạt chất Amino Acid, Keratin, Collagen Thuỷ phân", 
    "Khuyến khích kết hợp dịch vụ cắt tỉa ngọn tóc định kỳ 1 lần/tháng", 
    "Hạn chế thực hiện uốn/duỗi/nhuộm"
  ];
} else if (avg >= 1.0) {
  evaluation = "Hư tổn nặng";
  recommendations = [
    "Phục hồi chuyên sâu 2 lần 1 tuần", 
    "Sử dụng các hoạt chất Amino Acid, Keratin thuỷ phân, Collagen Thuỷ phân", 
    "Kết hợp gội dưỡng phục hồi tại nhà", 
    "Hạn chế thực hiện uốn/duỗi", 
    "Có thể nhuộm màu cơ bản. Tuyệt đối không tẩy tóc"
  ];
} else {
  evaluation = "Hư tổn nghiêm trọng";
  recommendations = [
    "Phục hồi chuyên sâu 2 lần 1 tuần", 
    "Sử dụng các hoạt chất Amino Acid, Keratin thuỷ phân, Collagen Thuỷ phân, Protein peptide", 
    "Kết hợp gội dưỡng phục hồi tại nhà", 
    "Tuyệt đối không tẩy tóc và các dịch vụ uốn, duỗi", 
    "Có thể nhuộm màu cơ bản", 
    "Bảo vệ tóc khi ra nắng"
  ];
}

document.getElementById('evaluation').textContent = `Đánh giá: ${evaluation}`;
document.getElementById('recommendationText').textContent = recommendation;

const recommendationList = document.getElementById('recommendationList');
recommendationList.innerHTML = '';
recommendations.forEach(rec => {
  const li = document.createElement('li');
  li.textContent = rec;
  recommendationList.appendChild(li);
});

document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
} else {
  alert("Vui lòng chấm điểm tất cả tiêu chí.");
}
}
</script>
